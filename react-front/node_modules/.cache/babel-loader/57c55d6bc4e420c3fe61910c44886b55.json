{"ast":null,"code":"import _classCallCheck from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/src/components/Search.jsx\";\nimport React, { Component } from 'react';\nimport axios from \"axios\"; // import Signin from \"./Signin\"\n\nimport { Link } from 'react-router-dom';\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n\n    _this.handleChange = function (e) {\n      _this.setState({\n        comment: e.target.value\n      }); // this helps you target the click target to search\n\n    };\n\n    _this.handleSubmit = function (filmId, e) {\n      e.preventDefault();\n      var data = {\n        filmId: \"\",\n        userId: _this.props.userId,\n        comment: _this.state.comment\n      };\n      axios.post(\"http://localhost:5000/comments\", {}).then(function (result) {\n        console.log(\"He\", result);\n      }).catch(function (err) {\n        return console.log(err);\n      }); // this.setState({search: input})\n    };\n\n    _this.logInHandler = function (e) {\n      _this.setState({\n        isLoggedIn: true\n      });\n    };\n\n    _this.state = {\n      movies: [],\n      search: \"\",\n      input: \"\",\n      comment: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios('http://localhost:5000/search', {\n        withCredentials: true\n      }).then(function (result) {\n        // console.log(\"dfdfd\", result)\n        _this2.setState({\n          movies: result.data.movies\n        }, function () {\n          console.log(_this2.state);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // debugger\n      if (this.props.isLoggedIn) {\n        var allMoviesSearch = this.state.movies.filter(function (movies) {\n          var moviesNameToLowerCase = movies.title.toLowerCase();\n\n          var searchName = _this3.state.search.toLowerCase();\n\n          return moviesNameToLowerCase.includes(searchName);\n        });\n        var showFilm = allMoviesSearch.map(function (oneFilm) {\n          console.log(oneFilm);\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, React.createElement(\"ul\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }, React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            },\n            __self: this\n          }, \"Movie title:\", oneFilm.title), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          }, \"Movie director:\", oneFilm.director), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, \"Movie year:\", oneFilm.year), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }, \"Movie duration:\", oneFilm.duration), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          }, \"Comments: \", oneFilm.comments)), React.createElement(\"form\", {\n            onSubmit: function onSubmit(e) {\n              _this3.handleSubmit(oneFilm._id, e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 81\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            type: \"text\",\n            placeholder: \"leave a comment\",\n            onChange: _this3.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            type: \"submit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }, \"Comment\")));\n        });\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          name: \"search\",\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: this.handleSubmit,\n          value: \"Submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        })), this.state.search === \"\" ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, showFilm, \" Rate this movie  \"));\n      } else {\n        // debugger\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/Signin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"Sign-in\"));\n      }\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/juud/Desktop/IRONHACK/react/react-project/react-front/src/components/Search.jsx"],"names":["React","Component","axios","Link","Search","props","handleChange","e","setState","comment","target","value","handleSubmit","filmId","preventDefault","data","userId","state","post","then","result","console","log","catch","err","logInHandler","isLoggedIn","movies","search","input","withCredentials","error","allMoviesSearch","filter","moviesNameToLowerCase","title","toLowerCase","searchName","includes","showFilm","map","oneFilm","director","year","duration","comments","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from \"axios\"\n// import Signin from \"./Signin\"\n import { Link } from 'react-router-dom';\n\nclass Search extends Component {\n\n    constructor(props){\n      super(props)\n       this.state = { \n         movies: [],\n         search: \"\",\n         input: \"\",\n         comment:\"\"\n        }\n    }\n\n\n  componentDidMount() {\n  \n    axios('http://localhost:5000/search', {withCredentials: true})\n     .then(result => {\n      \n       // console.log(\"dfdfd\", result)\n       this.setState({movies: result.data.movies}, () =>{\n         console.log(this.state)\n       })\n     })  \n     .catch((error)=> {\n      \n       console.log(error)\n     })\n  }\n\n\n    handleChange = (e)=> {\n        this.setState({comment: e.target.value})  // this helps you target the click target to search\n        \n      }\n       \n      handleSubmit = (filmId, e)=> {\n        e.preventDefault();\n        \n        let data = {\n            filmId:\"\",\n            userId: this.props.userId,\n            comment:this.state.comment\n        }\n        \n        axios.post(`http://localhost:5000/comments`,{}).then(result =>{\n          console.log(\"He\", result)\n        }).catch(err => console.log(err)) \n        \n        // this.setState({search: input})\n      }\n\n      logInHandler = (e)=> {\n        this.setState({isLoggedIn: true})\n      }\n\n  render() {\n     // debugger\n    if(this.props.isLoggedIn) {\n        var allMoviesSearch  = this.state.movies.filter( (movies) => {\n        let moviesNameToLowerCase = movies.title.toLowerCase();\n        let searchName = this.state.search.toLowerCase();\n        return (moviesNameToLowerCase.includes(searchName))\n        })\n    \n        var  showFilm = allMoviesSearch.map( oneFilm => {\n          console.log(oneFilm)\n            return( \n              <div>\n                <ul>\n                    <li>Movie title:{oneFilm.title}</li>\n                    <li>Movie director:{oneFilm.director}</li>\n                    <li>Movie year:{oneFilm.year}</li>\n                    <li>Movie duration:{oneFilm.duration}</li>\n                    <li>Comments: {oneFilm.comments}</li>\n                </ul>\n                <form onSubmit={ e=> {this.handleSubmit(oneFilm._id, e) }} >\n                  <input type=\"text\" placeholder=\"leave a comment\" onChange={this.handleChange}/>\n                  <button type=\"submit\">Comment</button>\n                </form>\n                </div>\n            )\n        })\n\n        return (\n            <div>\n                <div>\n                    <input type=\"text\" name=\"search\" onChange={this.handleChange} ></input>\n                    <button onClick={this.handleSubmit} value=\"Submit\"></button>   \n                </div>\n            {this.state.search === \"\" ? <div></div>: <div>{showFilm} Rate this movie  </div>}\n            </div>\n        )\n    } else {\n       // debugger\n        return <p><Link to=\"/Signin\">Sign-in</Link></p> \n        \n    }\n  }    \n} \n\n\nexport default Search;\n    "]},"metadata":{},"sourceType":"module"}