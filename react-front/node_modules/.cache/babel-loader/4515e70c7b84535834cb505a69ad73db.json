{"ast":null,"code":"import _defineProperty from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/juud/Desktop/IRONHACK/react/react-project/react-front/src/components/Search.jsx\";\nimport React, { Component } from 'react';\nimport axios from \"axios\"; // import Signin from \"./Signin\"\n\nimport { Link } from 'react-router-dom';\nimport config from \"../config.json\";\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n\n    _this.handleChange = function (e) {\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n      _this.setState(_defineProperty({}, name, value)); // this helps you target the click target to search\n\n    };\n\n    _this.handleSubmit = function (e) {\n      var input = _this.state.input;\n\n      _this.setState({\n        search: input\n      });\n    };\n\n    _this.logInHandler = function (e) {\n      _this.setState({\n        isLoggedIn: true\n      });\n    };\n\n    _this.handleCommentSubmit = function (filmId, e) {\n      e.preventDefault();\n      console.log(filmId);\n      var data = {\n        filmId: filmId,\n        comment: _this.state.comment // Retrieving filmID data.\n\n      };\n      axios.post(\"\".concat(config.backendUrl, \"/Comments\"), data).then(function (result) {\n        console.log(\"He\", result);\n\n        var newMovies = _this.state.movies.map(function (elem) {\n          if (elem.title === result.data.result.title) {\n            return elem = result.data.result;\n          }\n\n          return elem;\n        });\n\n        _this.setState({\n          movies: newMovies\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.state = {\n      movies: [],\n      search: \"\",\n      input: \"\",\n      comment: \"\"\n    };\n    return _this;\n  } // question why do we have comments as stage on search and search?\n\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      debugger;\n      console.log(config.backendUrl);\n      axios.post(\"\".concat(config.backendUrl, \"/Search\"), {\n        withCredentials: true\n      }).then(function (result) {\n        debugger; // console.log(\"dfdfd\", result)\n\n        _this2.setState({\n          movies: result.data.movies\n        }, function () {});\n      }).catch(function (error) {\n        debugger;\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // debugger\n      console.log(this.state);\n\n      if (this.props.isLoggedIn) {\n        var allMoviesSearch = this.state.movies.filter(function (movies) {\n          var moviesNameToLowerCase = movies.title.toLowerCase();\n\n          var searchName = _this3.state.search.toLowerCase();\n\n          return moviesNameToLowerCase.includes(searchName);\n        });\n        var showFilm = allMoviesSearch.map(function (oneFilm) {\n          return React.createElement(\"div\", {\n            className: \"movielist\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }, React.createElement(\"ul\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            },\n            __self: this\n          }, React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          }, \"Movie title:\", oneFilm.title), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }, \"Movie director:\", oneFilm.director), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          }, \"Movie year:\", oneFilm.year), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99\n            },\n            __self: this\n          }, \"Movie duration:\", oneFilm.duration), React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            },\n            __self: this\n          }, \"Comments: \", oneFilm.comments.map(function (oneComment) {\n            return React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 101\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 102\n              },\n              __self: this\n            }, \"By: \", oneComment.author, \" \"), React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 103\n              },\n              __self: this\n            }, \"Comment: \", oneComment.comment));\n          }))), React.createElement(\"form\", {\n            onSubmit: function onSubmit(e) {\n              _this3.handleCommentSubmit(oneFilm._id, e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            className: \"movielistipt\",\n            type: \"text\",\n            placeholder: \"leave a comment\",\n            name: \"comment\",\n            onChange: _this3.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            type: \"submit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, \"Comment\")));\n        });\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"Search Movies\"), React.createElement(\"input\", {\n          className: \"moviesearchinp\",\n          type: \"text\",\n          name: \"input\",\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          className: \"moviesearchbtn\",\n          onClick: this.handleSubmit,\n          value: \"Submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        })), this.state.search === \"\" ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, showFilm, \" \"));\n      } else {\n        // debugger\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/Signin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, \"Sign-in\"));\n      }\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/Users/juud/Desktop/IRONHACK/react/react-project/react-front/src/components/Search.jsx"],"names":["React","Component","axios","Link","config","Search","props","handleChange","e","target","name","value","setState","handleSubmit","input","state","search","logInHandler","isLoggedIn","handleCommentSubmit","filmId","preventDefault","console","log","data","comment","post","backendUrl","then","result","newMovies","movies","map","elem","title","catch","err","withCredentials","error","allMoviesSearch","filter","moviesNameToLowerCase","toLowerCase","searchName","includes","showFilm","oneFilm","director","year","duration","comments","oneComment","author","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from \"axios\"\n// import Signin from \"./Signin\"\n import { Link } from 'react-router-dom';\n import config from \"../config.json\"\n\nclass Search extends Component {\n\n    constructor(props){\n      super(props)\n       this.state = { \n         movies: [],\n         search: \"\",\n         input: \"\",\n         comment:\"\"\n        }\n    }\n    // question why do we have comments as stage on search and search?\n\n  componentDidMount() {\n    debugger\n    console.log(config.backendUrl)\n    axios.post(`${config.backendUrl}/Search`,  {withCredentials: true})\n     .then(result => {\n      debugger\n      \n       // console.log(\"dfdfd\", result)\n       this.setState({movies: result.data.movies}, () =>{\n        \n        \n       })\n     })  \n     .catch((error)=> {\n      debugger\n       console.log(error)\n     })\n  }\n\n\n    handleChange = (e)=> {\n        let {name, value}  = e.target\n\n        this.setState({[name]: value})  // this helps you target the click target to search\n        \n      }\n       \n      handleSubmit = (e)=> {\n        var input = this.state.input\n        this.setState({search: input})\n      }\n\n      logInHandler = (e)=> {\n        this.setState({isLoggedIn: true})\n      }\n      \n\n      handleCommentSubmit = (filmId, e)=>{\n        e.preventDefault();\n        console.log(filmId)\n        let data = {\n            filmId:filmId,\n            comment:this.state.comment   // Retrieving filmID data.\n        }\n    \n        axios.post(`${config.backendUrl}/Comments`,data).then(result =>{\n          console.log(\"He\", result)\n          let newMovies = this.state.movies.map(elem =>{\n            if(elem.title === result.data.result.title){\n              return elem = result.data.result;\n            }\n            return elem;\n          })\n\n          this.setState({movies:newMovies})\n          \n        }).catch(err => console.log(err)) \n        \n       \n      }\n\n  render() {\n     // debugger\n     console.log(this.state)\n    if(this.props.isLoggedIn) {\n        var allMoviesSearch  = this.state.movies.filter( (movies) => {\n        let moviesNameToLowerCase = movies.title.toLowerCase();\n        let searchName = this.state.search.toLowerCase();\n        return (moviesNameToLowerCase.includes(searchName))\n        })\n    \n        var  showFilm = allMoviesSearch.map( oneFilm => {\n        \n            return( \n              <div className = \"movielist\">\n                <ul>\n                    <li>Movie title:{oneFilm.title}</li>\n                    <li>Movie director:{oneFilm.director}</li>\n                    <li>Movie year:{oneFilm.year}</li>\n                    <li>Movie duration:{oneFilm.duration}</li>\n                    <li>Comments: {oneFilm.comments.map(oneComment =>{\n                      return(<span>\n                        <span>By: {oneComment.author} </span>\n                        <span>Comment: {oneComment.comment}</span>\n                      </span>)\n                    })}</li>\n                </ul>\n                <form onSubmit={e =>{this.handleCommentSubmit(oneFilm._id, e)}}>  \n                  <input className = \"movielistipt\" type=\"text\" placeholder=\"leave a comment\" name=\"comment\" onChange={this.handleChange}/>\n                  <button type=\"submit\">Comment</button>\n                </form>\n                </div>\n            )\n        })\n\n        return (\n            <div>\n                <div>\n                  <p>Search Movies</p>\n                    <input className = \"moviesearchinp\" type=\"text\" name=\"input\" onChange={this.handleChange} ></input>\n                    <button className = \"moviesearchbtn\"  onClick={this.handleSubmit} value=\"Submit\"></button>   \n                </div>\n            {this.state.search === \"\" ? <div></div>: <div>{showFilm} </div>}\n            </div>\n        )\n    } else {\n       // debugger\n        return <p><Link to=\"/Signin\">Sign-in</Link></p> \n        \n    }\n  }    \n} \n\n\nexport default Search;\n    "]},"metadata":{},"sourceType":"module"}