(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e){e.exports={backendUrl:"http://localhost:5000"}},25:function(e,t,n){e.exports=n(57)},31:function(e,t,n){},52:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(23),o=n.n(r),s=n(6),i=n(7),c=n(9),m=n(8),u=n(10),h=(n(31),n(11)),d=n.n(h),p=n(58),g=(n(52),n(13));d.a.defaults.withCredentials=!0;var f=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).handleSigninSubmit=function(t){t.preventDefault(),d.a.post("".concat(g.backendUrl,"/Signin"),{withCredentials:!0,method:"post",data:{username:e.state.username,password:e.state.password}}).then(function(t){console.log(t),e.props.logInHandler()}).catch(function(e){console.log(e)})},e.handleOnChange=function(t){var n={};n[t.target.name]=t.target.value,e.setState(n)},e.state={username:"",password:""},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"register"},l.a.createElement("h3",null,"Sign in "),l.a.createElement("form",{onSubmit:this.handleSigninSubmit},l.a.createElement("input",{className:"user",onChange:this.handleOnChange,name:"username",type:"text",placeholder:"username"}),l.a.createElement("input",{className:"pass",onChange:this.handleOnChange,name:"password",type:"password",placholder:"password"}),l.a.createElement("input",{className:"usersub",type:"submit",value:"submit"})),l.a.createElement("p",null,"Or ",l.a.createElement(p.a,{to:"/Signup"},"register")))}}]),t}(a.Component),v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),d.a.post("".concat(g.backendUrl,"/Signin"),{withCredentials:!0,method:"post",data:{username:e.state.username,password:e.state.password,firstname:e.state.firstname,lastname:e.state.lastname}}).then(function(e){}).catch(function(e){})},e.handleOnChange=function(t){var n={};n[t.target.name]=t.target.value,e.setState(n)},e.state={username:"",password:"",firstname:"",lastname:""},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"m"},l.a.createElement("h3",null,"Sign up"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{className:"fn",onChange:this.handleOnChange,name:"firstname",type:"text",placeholder:"first-name"}),l.a.createElement("input",{className:"ln",onChange:this.handleOnChange,name:"lastname",type:"text",placholder:"last-name"})," ",l.a.createElement("br",null),l.a.createElement("input",{className:"un",onChange:this.handleOnChange,name:"username",type:"text",placeholder:"username"}),l.a.createElement("input",{className:"pw",onChange:this.handleOnChange,name:"password",type:"password",placholder:"password"}),l.a.createElement("input",{className:"btnn",type:"submit",value:"submit"})))}}]),t}(a.Component),b=n(24),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,l=t.value;n.setState(Object(b.a)({},a,l))},n.handleSubmit=function(e){var t=n.state.input;n.setState({search:t})},n.logInHandler=function(e){n.setState({isLoggedIn:!0})},n.handleCommentSubmit=function(e,t){t.preventDefault(),console.log(e);var a={filmId:e,comment:n.state.comment};d.a.post("".concat(g.backendUrl,"/Comments"),a).then(function(e){console.log("He",e);var t=n.state.movies.map(function(t){return t.title==e.data.result.title?e.data.result:t});n.setState({movies:t})}).catch(function(e){return console.log(e)})},n.state={movies:[],search:"",input:"",comment:""},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.post("".concat(g.backendUrl,"/Search"),{withCredentials:!0}).then(function(t){e.setState({movies:t.data.movies},function(){})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;if(console.log(this.state),this.props.isLoggedIn){var t=this.state.movies.filter(function(t){var n=t.title.toLowerCase(),a=e.state.search.toLowerCase();return n.includes(a)}).map(function(t){return l.a.createElement("div",{className:"movielist"},l.a.createElement("ul",null,l.a.createElement("li",null,"Movie title:",t.title),l.a.createElement("li",null,"Movie director:",t.director),l.a.createElement("li",null,"Movie year:",t.year),l.a.createElement("li",null,"Movie duration:",t.duration),l.a.createElement("li",null,"Comments: ",t.comments.map(function(e){return l.a.createElement("span",null,l.a.createElement("span",null,"By: ",e.author," "),l.a.createElement("span",null,"Comment: ",e.comment))}))),l.a.createElement("form",{onSubmit:function(n){e.handleCommentSubmit(t._id,n)}},l.a.createElement("input",{className:"movielistipt",type:"text",placeholder:"leave a comment",name:"comment",onChange:e.handleChange}),l.a.createElement("button",{type:"submit"},"Comment")))});return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,"Search Movies"),l.a.createElement("input",{className:"moviesearchinp",type:"text",name:"input",onChange:this.handleChange}),l.a.createElement("button",{className:"moviesearchbtn",onClick:this.handleSubmit,value:"Submit"})),""===this.state.search?l.a.createElement("div",null):l.a.createElement("div",null,t," "))}return l.a.createElement("p",null,l.a.createElement(p.a,{to:"/Signin"},"Sign-in"))}}]),t}(a.Component),C=n(59),S=n(60),w=n(61),O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).logInHandler=function(e){n.setState({isLoggedIn:!0})},n.state={isLoggedIn:!1},n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(C.a,null,l.a.createElement("div",null,l.a.createElement(S.a,{exact:!0,path:"/",render:function(t){return l.a.createElement(f,{logInHandler:e.logInHandler})}}),l.a.createElement(S.a,{path:"/Signup",component:v}),l.a.createElement(S.a,{path:"/Signin",render:function(t){return l.a.createElement(f,{logInHandler:e.logInHandler})}}),l.a.createElement(S.a,{path:"/search",render:function(t){return l.a.createElement(E,Object.assign({},t,{isLoggedIn:e.state.isLoggedIn}))}}),this.state.isLoggedIn?l.a.createElement(w.a,{to:"/search"}):l.a.createElement("div",null)))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.07f4392b.chunk.js.map